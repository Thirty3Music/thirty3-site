<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basics -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />

  <!-- Core SEO -->
  <title>THIRTY3 — Official site</title>
  <meta name="description" content="THIRTY3 — electronic artist/producer from Sweden. Distorted soul & ambient noise, sound design, collaborations, live AV." />
  <link rel="canonical" href="https://thirty3music.github.io/thirty3-site/" />
  <meta name="robots" content="index,follow" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="THIRTY3" />
  <meta property="og:title" content="THIRTY3 — Official site" />
  <meta property="og:description" content="Electronic artist/producer from Sweden. Distorted soul & ambient noise." />
  <meta property="og:url" content="https://thirty3music.github.io/thirty3-site/" />
  <meta property="og:image" content="https://thirty3music.github.io/thirty3-site/image00015.jpeg" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="THIRTY3 — Official site" />
  <meta name="twitter:description" content="Electronic artist/producer from Sweden." />
  <meta name="twitter:image" content="https://thirty3music.github.io/thirty3-site/image00015.jpeg" />

  <!-- JSON-LD (Person) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "@id": "https://thirty3music.github.io/thirty3-site/#person",
    "name": "THIRTY3",
    "alternateName": ["Thirty3"],
    "description": "Electronic artist/producer from Sweden. Distorted soul & ambient noise.",
    "disambiguatingDescription": "THIRTY3, electronic artist/producer from Sweden (not the US hardcore band or other artists named Thirty3).",
    "url": "https://thirty3music.github.io/thirty3-site/",
    "email": "mailto:thirty3contact@gmail.com",
    "homeLocation": "Sweden",
    "sameAs": [
      "https://soundcloud.com/thirty_3",
      "https://thirty3.bandcamp.com/",
      "https://www.youtube.com/@thirty3473",
      "https://www.instagram.com/_thirty3_/"
    ]
  }
  </script>

  <!-- Small page-specific tweaks -->
  <style>
    /* Gör toppbarens text lite mjukare på mobil */
    @media (max-width: 480px){
      .topbar nav a{ font-size:12px; padding:6px 10px; }
      .subtitle{ font-size:16px; }
      .intro{ font-size:14px; }
      .mobile-overlay{ font-size:13px; }
    }
    /* Säkerställ att kontaktlänken alltid är klickbar överst */
    .topbar nav a[href^="mailto:"]{ border-color: var(--chipBorder); }
    .topbar nav a[href^="mailto:"]:hover{ background: var(--chipHover); }
    #logo3d-wrap{ position:fixed; left:12px; top:8px; width:84px; height:84px; z-index:10001; pointer-events:none; }
    #logo3d{ width:100%; height:100%; display:block; }
    @media (max-width:600px){ #logo3d-wrap{ left:8px; top:8px; width:64px; height:64px; } }
    /* ”Tap to open”-lagret */
    .mobile-overlay{
      position:absolute; inset:0;
      display:none; align-items:center; justify-content:center;
      color:#fff; background:rgba(0,0,0,.28);
      letter-spacing:.08em;
      z-index:2;
      user-select:none;
    }
    .show-mobile-overlay .mobile-overlay{ display:flex; }
  </style>
</head>

<body class="home">
  <!-- Top bar -->
  <header class="topbar">
    <nav aria-label="Primary">
      <a href="https://www.instagram.com/_thirty3_/" target="_blank" rel="noopener">INSTAGRAM</a>
      <a href="https://soundcloud.com/thirty_3" target="_blank" rel="noopener">SOUNDCLOUD</a>
      <a href="https://www.youtube.com/@thirty3473" target="_blank" rel="noopener">YOUTUBE</a>
      <a href="work-test.html">WORK</a>
      <!-- Öppnar mailklient direkt -->
      <a href="mailto:thirty3contact@gmail.com" aria-label="Email THIRTY3">CONTACT</a>
    </nav>
  </header>
  <div id="logo3d-wrap"><canvas id="logo3d"></canvas></div>

  <!-- Background video + overlay -->
  <main>
    <div class="video-wrapper">
      <video autoplay muted loop playsinline preload="auto" class="bg-video" id="bgVideo">
        <source src="background.mp4" type="video/mp4" />
        <source src="background_high_quality.webm" type="video/webm" />
      </video>
      <div class="overlay"></div>
      <!-- Mobil overlay (tap to open) -->
      <div class="mobile-overlay" id="mobileOverlay">tap to open</div>
    </div>

    <!-- Center content -->
    <section class="content" aria-label="Intro">
      <h1 class="glitch-title">T H I R T Y 3</h1>
      <p class="subtitle">noise // soul</p>
      <p class="intro" id="typing-text"></p>
    </section>

    <!-- Contact anchor (visuell sektion kvar om du länkar internt senare) -->
    <section id="contact" style="display:none;"></section>
  </main>

  <!-- Scripts: typing + mobil + glitch -->
  <script>
    // Typing intro
    const text = "sound over style — emotion over ego — music that says what I don't";
    const target = document.getElementById('typing-text');
    let idx = 0;
    function typeChar(){
      if(idx < text.length){ target.textContent += text.charAt(idx++); setTimeout(typeChar, 38); }
    }
    window.addEventListener('load', () => setTimeout(typeChar, 900));

    // Mobil overlay (kräv tap för att starta video på iOS om blockeras)
    const html = document.documentElement;
    const ovl = document.getElementById('mobileOverlay');
    const v = document.getElementById('bgVideo');
    function needsTap(){ return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent); }
    function enableVideo(){
      html.classList.remove('show-mobile-overlay');
      if (v && v.paused) { v.play().catch(()=>{}); }
    }
    if (needsTap()){
      html.classList.add('show-mobile-overlay');
      ovl.addEventListener('click', enableVideo, { passive:true });
      // fallback: starta ändå efter kort delay om tillåtet
      setTimeout(enableVideo, 1200);
    }

    // Små glitch-effekter när sidan laddas
    function glitchAndShow(el){ el.classList.add('glitching'); setTimeout(()=> el.classList.remove('glitching'), 600); }
    window.addEventListener('DOMContentLoaded', ()=> glitchAndShow(document.querySelector('.glitch-title')));
  </script>

  <!-- 3D LOGO (Three.js + OBJLoader) -->
  <script src="https://unpkg.com/three@0.159.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.159.0/examples/js/loaders/OBJLoader.js"></script>
  <script>
  (function () {
    const cvs = document.getElementById('logo3d');
    if (!cvs || !window.THREE) { console.warn('Three.js init skipped'); return; }

    const renderer = new THREE.WebGLRenderer({ canvas: cvs, alpha: true, antialias: true });
    if (!renderer.getContext()) { console.warn('Three.js renderer unavailable (no WebGL context)'); return; }
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));

    const scene = new THREE.Scene();
    const cam = new THREE.PerspectiveCamera(35, 1, 0.1, 100);
    cam.position.set(0.8, 0.6, 2.2);
    scene.add(cam);

    scene.add(new THREE.AmbientLight(0xffffff, 0.9));
    const dir = new THREE.DirectionalLight(0xffffff, 1.0);
    dir.position.set(2,2,3);
    scene.add(dir);

    const fallback = new THREE.Mesh(
      new THREE.BoxGeometry(1,1,1),
      new THREE.MeshStandardMaterial({ color:0xe7eceb, metalness:0.2, roughness:0.7 })
    );
    fallback.scale.setScalar(0.6);
    scene.add(fallback);

    function resize(){
      const w = cvs.clientWidth || 84;
      const h = cvs.clientHeight || 84;
      renderer.setSize(w, h, false);
      cam.aspect = w/h; cam.updateProjectionMatrix();
    }
    resize(); window.addEventListener('resize', resize);

    function fitAndCenter(obj, target = 1.2){
      const box = new THREE.Box3().setFromObject(obj);
      const size = box.getSize(new THREE.Vector3());
      const maxDim = Math.max(size.x, size.y, size.z) || 1;
      const center = box.getCenter(new THREE.Vector3());
      obj.position.sub(center);
      obj.scale.setScalar(target / maxDim);
      obj.rotation.set(0.2, 0.6, 0.0);
    }

    const OBJ_URL = new URL('Thirty3_Live_Logo.obj', window.location.href).toString();
    const loader = new THREE.OBJLoader();
    let liveObj = null;

    loader.load(OBJ_URL, (obj) => {
      obj.traverse((m) => {
        if (m.isMesh && !m.material) {
          m.material = new THREE.MeshStandardMaterial({ color:0xe7eceb, metalness:0.25, roughness:0.6 });
        }
      });
      fitAndCenter(obj);
      scene.remove(fallback);
      scene.add(obj);
      liveObj = obj;
    }, undefined, (err) => {
      console.error('OBJ load error:', err); // fallback cube stays visible
    });

    (function tick(){
      (liveObj || fallback).rotation.y += 0.01;
      renderer.render(scene, cam);
      requestAnimationFrame(tick);
    })();
  })();
  </script>
</body>
</html>
